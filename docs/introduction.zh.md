# Open Agent SDK - é¡¹ç›®ä»‹ç»

[English Version](./introduction.md)

---

## æ¦‚è¿°

Open Agent SDK æ˜¯ä¸€ä¸ªå¼€æºçš„ TypeScript æ¡†æ¶ï¼Œç”¨äºæ„å»º AI Agentã€‚å®ƒæä¾›äº†ç±»ä¼¼ Claude Agent SDK çš„å¼€å‘ä½“éªŒï¼Œä½†å®Œå…¨é€æ˜ä¸”æ²¡æœ‰ä¾›åº”å•†é”å®šã€‚

## ä¸ºä»€ä¹ˆé€‰æ‹©å®ƒï¼Ÿ

### ğŸ”“ å¼€æºé€æ˜
- å®Œæ•´çš„æºä»£ç å¯è§æ€§
- MIT è®¸å¯è¯
- ç¤¾åŒºé©±åŠ¨å¼€å‘
- æ²¡æœ‰é»‘ç›’

### ğŸ”Œ ä¾›åº”å•†æ— å…³
- **å¤šä¾›åº”å•†æ”¯æŒ**ï¼šOpenAIã€Google Geminiã€Anthropic
- **æ˜“äºæ‰©å±•**ï¼šé€šè¿‡ç®€å•æ¥å£æ·»åŠ è‡ªå®šä¹‰ Provider
- **æ— ä¾›åº”å•†é”å®š**ï¼šæ— éœ€ä¿®æ”¹ä»£ç å³å¯åˆ‡æ¢ Provider

### ğŸ¯ ç”Ÿäº§å°±ç»ª
- **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript æ”¯æŒå’Œä¸¥æ ¼çš„ç±»å‹çº¦æŸ
- **é«˜æµ‹è¯•è¦†ç›–ç‡**ï¼š86%+ ä»£ç è¦†ç›–ç‡
- **ç»è¿‡å®æˆ˜éªŒè¯**ï¼šæ ¸å¿ƒ ReAct å¾ªç¯åœ¨å¤šä¸ª Provider ä¸ŠéªŒè¯
- **å–æ¶ˆæ”¯æŒ**ï¼šé€šè¿‡ AbortController ä¸­æ–­æ“ä½œ

## æ ¸å¿ƒæ¦‚å¿µ

### ReAct å¾ªç¯

SDK å®ç°äº† ReActï¼ˆæ¨ç† + è¡ŒåŠ¨ï¼‰æ¨¡å¼ï¼š

1. **è§‚å¯Ÿ**ï¼šAgent æ¥æ”¶è¾“å…¥å’Œå½“å‰çŠ¶æ€
2. **æ€è€ƒ**ï¼šAgent æ¨ç†åº”è¯¥é‡‡å–ä»€ä¹ˆè¡ŒåŠ¨
3. **è¡ŒåŠ¨**ï¼šAgent æ‰§è¡Œå·¥å…·ï¼ˆæ–‡ä»¶æ“ä½œã€Shell å‘½ä»¤ã€ç½‘é¡µæœç´¢ç­‰ï¼‰
4. **é‡å¤**ï¼šå¾ªç¯ç»§ç»­ç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–è¾¾åˆ°æœ€å¤§è½®æ•°

```
ç”¨æˆ·è¾“å…¥ â†’ [è§‚å¯Ÿ â†’ æ€è€ƒ â†’ è¡ŒåŠ¨] â†’ ç»“æœ
                â†‘_________â†“
              ï¼ˆå¾ªç¯ç›´åˆ°å®Œæˆï¼‰
```

### å·¥å…·

å·¥å…·æ˜¯ Agent çš„èƒ½åŠ›ã€‚SDK æä¾› 17 ä¸ªå†…ç½®å·¥å…·ï¼š

- **æ–‡ä»¶æ“ä½œ**ï¼šè¯»å–ã€å†™å…¥ã€ç¼–è¾‘æ–‡ä»¶
- **Shell æ‰§è¡Œ**ï¼šè¿è¡Œ bash å‘½ä»¤ï¼Œæ”¯æŒè¶…æ—¶å’Œåå°è¿è¡Œ
- **ä»£ç æœç´¢**ï¼šGlobï¼ˆæŸ¥æ‰¾æ–‡ä»¶ï¼‰ã€Grepï¼ˆæœç´¢å†…å®¹ï¼‰
- **ç½‘é¡µè®¿é—®**ï¼šWebSearchã€WebFetch
- **ä»»åŠ¡ç®¡ç†**ï¼šå§”æ‰˜ç»™å­ Agent
- **äº¤äº’**ï¼šè¯¢é—®ç”¨æˆ·é—®é¢˜

### ä¼šè¯

ä¼šè¯æ”¯æŒæŒä¹…åŒ–å¯¹è¯ï¼š

- **åˆ›å»º**ï¼šä½¿ç”¨ `createSession()` å¼€å§‹æ–°å¯¹è¯
- **æ¢å¤**ï¼šä½¿ç”¨ `resumeSession()` ä»ä¸Šæ¬¡ä¸­æ–­å¤„ç»§ç»­
- **åˆ†å‰**ï¼šä½¿ç”¨ `forkSession()` åˆ›å»ºåˆ†æ”¯æ¢ç´¢ä¸åŒè·¯å¾„
- **å­˜å‚¨**ï¼šInMemoryï¼ˆé»˜è®¤ï¼‰æˆ–åŸºäºæ–‡ä»¶çš„æŒä¹…åŒ–

### æƒé™

é€šè¿‡ 4 ç§æƒé™æ¨¡å¼æ§åˆ¶ Agent å¯ä»¥åšä»€ä¹ˆï¼š

- `default`ï¼šç ´åæ€§æ“ä½œï¼ˆç¼–è¾‘/å†™å…¥/bashï¼‰å‰è¯¢é—®ç”¨æˆ·
- `acceptEdits`ï¼šè‡ªåŠ¨æ‰¹å‡†ç¼–è¾‘ï¼Œå†™å…¥/bash éœ€è¦è¯¢é—®
- `bypassPermissions`ï¼šè‡ªåŠ¨æ‰¹å‡†æ‰€æœ‰æ“ä½œ
- `plan`ï¼šç”Ÿæˆæ‰§è¡Œè®¡åˆ’ä½†ä¸è¿è¡Œ

### Hooks

é€šè¿‡äº‹ä»¶é’©å­æ‰©å±• Agent è¡Œä¸ºï¼š

- `onTurnStart` / `onTurnEnd`ï¼šè¿½è¸ªå¯¹è¯è½®æ¬¡
- `onToolExecute` / `onToolResult`ï¼šç›‘æ§å·¥å…·ä½¿ç”¨
- `onPermissionRequest` / `onPermissionDecision`ï¼šè‡ªå®šä¹‰æƒé™é€»è¾‘
- `onStreamChunk` / `onStreamComplete`ï¼šæµå¤„ç†
- `onError`ï¼šé”™è¯¯å¤„ç†

## æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Open Agent SDK                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   prompt()   â”‚  â”‚   Session    â”‚  â”‚  ReActLoop       â”‚  â”‚
â”‚  â”‚   (å•æ¬¡)     â”‚  â”‚  (æŒä¹…åŒ–)    â”‚  â”‚ (æ¨ç† + è¡ŒåŠ¨)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                           â”‚                                â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â–¼                 â–¼                 â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Provider  â”‚   â”‚ ToolRegistry â”‚   â”‚  Permission  â”‚     â”‚
â”‚  â”‚  Manager   â”‚   â”‚ (17 ä¸ªå·¥å…·)  â”‚   â”‚   Manager    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                 â”‚                 â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                           â”‚                                â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                    â”‚HookManager  â”‚                         â”‚
â”‚                    â”‚(9 ä¸ªäº‹ä»¶)   â”‚                         â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨åœºæ™¯

### 1. ä»£ç åŠ©æ‰‹
```typescript
const result = await prompt("åˆ†æè¿™ä¸ªä»£ç åº“å¹¶æå‡ºæ”¹è¿›å»ºè®®", {
  model: 'your-model',
  apiKey: process.env.OPENAI_API_KEY,
  allowedTools: ['Read', 'Glob', 'Grep'],
  cwd: './src',
});
```

### 2. DevOps è‡ªåŠ¨åŒ–
```typescript
const result = await prompt("æ£€æŸ¥æœåŠ¡å™¨å¥åº·çŠ¶å†µï¼Œå¦‚æœ‰éœ€è¦åˆ™é‡å¯", {
  model: 'your-model',
  apiKey: process.env.OPENAI_API_KEY,
  allowedTools: ['Bash', 'Read'],
  permissionMode: 'default', // å±é™©æ“ä½œéœ€è¦æ‰¹å‡†
});
```

### 3. ç ”ç©¶åŠ©æ‰‹
```typescript
const session = createSession({
  model: 'your-model',
  apiKey: process.env.OPENAI_API_KEY,
  allowedTools: ['WebSearch', 'WebFetch', 'Write'],
});

await session.send("ç ”ç©¶æœ€æ–°çš„ AI å‘å±•å¹¶å†™ä¸€ä»½æ‘˜è¦");
for await (const msg of session.stream()) {
  console.log(msg);
}
```

### 4. äº¤äº’å¼å¼€å‘
```typescript
const session = createSession({
  model: 'your-model',
  apiKey: process.env.OPENAI_API_KEY,
  hooks: {
    onPermissionRequest: async (request) => {
      // è‡ªå®šä¹‰æ‰¹å‡†é€»è¾‘
      return request.type === 'edit' ? 'approve' : 'reject';
    },
  },
});
```

## ä¸ Claude Agent SDK å¯¹æ¯”

| åŠŸèƒ½ | Open Agent SDK | Claude Agent SDK |
|------|---------------|------------------|
| å¼€æº | âœ… æ˜¯ | âŒ å¦ |
| å¤šä¾›åº”å•† | âœ… OpenAI/Gemini/Anthropic | âŒ ä»… Anthropic |
| ReAct å¾ªç¯ | âœ… | âœ… |
| å†…ç½®å·¥å…· | âœ… 17 ä¸ªå·¥å…· | âœ… ç±»ä¼¼ |
| ä¼šè¯ç®¡ç† | âœ… | âœ… |
| æƒé™ç³»ç»Ÿ | âœ… | âœ… |
| Hooks | âœ… 9 ä¸ªäº‹ä»¶ | âœ… ç±»ä¼¼ |
| å­ Agent | âœ… | âœ… |
| æµè§ˆå™¨è‡ªåŠ¨åŒ– | ğŸš§ è®¡åˆ’ä¸­ | âœ… |
| ç»“æ„åŒ–è¾“å‡º | ğŸš§ è®¡åˆ’ä¸­ | âœ… |

**åŠŸèƒ½å®Œæˆåº¦**ï¼šçº¦ 70-80%

## å¿«é€Ÿå¼€å§‹

1. **å®‰è£…**
   ```bash
   npm install open-agent-sdk@alpha
   ```

2. **å¿«é€Ÿç¤ºä¾‹**
   ```typescript
   import { prompt } from 'open-agent-sdk';
   
   const result = await prompt("å½“å‰ç›®å½•æœ‰å“ªäº›æ–‡ä»¶ï¼Ÿ", {
     model: 'your-model',
     apiKey: process.env.OPENAI_API_KEY,
   });
   
   console.log(result.result);
   ```

3. **ä¸‹ä¸€æ­¥**
   - æŸ¥çœ‹ [API å‚è€ƒ](./api-reference.zh.md)
   - æ¢ç´¢[ç¤ºä¾‹](../examples/)
   - åŠ å…¥[ç¤¾åŒºè®¨è®º](https://github.com/Octane0411/open-agent-sdk/discussions)

## ç¤¾åŒºä¸æ”¯æŒ

- **GitHub**: https://github.com/Octane0411/open-agent-sdk
- **Issues**: https://github.com/Octane0411/open-agent-sdk/issues
- **Discussions**: https://github.com/Octane0411/open-agent-sdk/discussions
- **Twitter**: [@octane0411](https://twitter.com/octane0411)

## è®¸å¯è¯

MIT License Â© 2026 Octane0411
